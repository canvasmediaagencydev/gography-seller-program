# ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ ThaiBulkSMS Email API

## ‡∏™‡∏≤‡∏£‡∏ö‡∏±‡∏ç
1. [‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°](#‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°)
2. [‡∏Ç‡πâ‡∏≠‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô](#‡∏Ç‡πâ‡∏≠‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô)
3. [‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå](#‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå)
4. [‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á](#‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á)
5. [API Documentation](#api-documentation)
6. [Code Examples](#code-examples)
7. [Email Templates](#email-templates)
8. [‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö](#‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö)
9. [Troubleshooting](#troubleshooting)
10. [Best Practices](#best-practices)
11. [‡∏†‡∏≤‡∏Ñ‡∏ú‡∏ô‡∏ß‡∏Å](#‡∏†‡∏≤‡∏Ñ‡∏ú‡∏ô‡∏ß‡∏Å)

---

## ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°

### ThaiBulkSMS Email API ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£
ThaiBulkSMS Email API ‡πÄ‡∏õ‡πá‡∏ô‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÅ‡∏ö‡∏ö transactional ‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢ ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÅ‡∏•‡∏∞‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡πÄ‡∏ä‡πà‡∏ô:
- ‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô
- ‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
- ‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô
- ‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á OTP

### ‡∏Å‡∏£‡∏ì‡∏µ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö
‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö Gography Seller Program ‡πÄ‡∏£‡∏≤‡πÉ‡∏ä‡πâ ThaiBulkSMS Email API ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö:
- **‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô Seller ‡πÄ‡∏°‡∏∑‡πà‡∏≠ Admin ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏ö‡∏±‡∏ç‡∏ä‡∏µ**
- **‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ñ‡∏π‡∏Å‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò**

### ‡∏Ç‡πâ‡∏≠‡∏î‡∏µ‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ ThaiBulkSMS
- ‚úÖ ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå
- ‚úÖ ‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏° (‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô 0.04 ‡∏ö‡∏≤‡∏ó/‡∏≠‡∏µ‡πÄ‡∏°‡∏•)
- ‚úÖ ‡∏°‡∏µ SPF, DKIM, DMARC authentication
- ‚úÖ API ‡∏á‡πà‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
- ‚úÖ ‡∏°‡∏µ‡∏ó‡∏µ‡∏° support ‡πÉ‡∏ô‡πÑ‡∏ó‡∏¢

---

## ‡∏Ç‡πâ‡∏≠‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô

### 1. API Credentials
‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ:
- `THAIBULKSMS_API_KEY` - API key ‡∏à‡∏≤‡∏Å ThaiBulkSMS
- `THAIBULKSMS_API_SECRET` - API secret ‡∏à‡∏≤‡∏Å ThaiBulkSMS

**‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠ API credentials:**
1. ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏ó‡∏µ‡πà https://www.thaibulksms.com
2. ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏•‡∏∞‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤ API settings
3. ‡∏™‡∏£‡πâ‡∏≤‡∏á API key ‡πÉ‡∏´‡∏°‡πà
4. ‡πÄ‡∏Å‡πá‡∏ö API key ‡πÅ‡∏•‡∏∞ API secret ‡πÑ‡∏ß‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢

### 2. Environment Variables
‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡∏ô‡∏µ‡πâ‡πÉ‡∏ô `.env.local`:

```env
# ThaiBulkSMS API Configuration
THAIBULKSMS_API_KEY=your_api_key_here
THAIBULKSMS_API_SECRET=your_api_secret_here

# Email Configuration
THAIBULKSMS_FROM_EMAIL=noreply@yourdomain.com
THAIBULKSMS_FROM_NAME=Gography Seller Program
NEXT_PUBLIC_SUPPORT_EMAIL=support@yourdomain.com
```

### 3. Dependencies
‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á dependencies ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° - ‡πÉ‡∏ä‡πâ Node.js built-in modules:
- `https` - ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö HTTP requests
- `Buffer` - ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Base64 encoding

---

## ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå

### ‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á

```
src/
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îî‚îÄ‚îÄ email/
‚îÇ       ‚îú‚îÄ‚îÄ thaibulksms.ts       # Email API client
‚îÇ       ‚îî‚îÄ‚îÄ templates.ts          # Email templates
‚îî‚îÄ‚îÄ types/
    ‚îî‚îÄ‚îÄ email.ts                  # TypeScript types (optional)
```

### ‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç

```
src/app/api/admin/sellers/[sellerId]/status/route.ts
```

### ‡πÅ‡∏ú‡∏ô‡∏ú‡∏±‡∏á‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î

```
gography-seller-program/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ email/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ thaibulksms.ts         # ‚Üê ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ templates.ts            # ‚Üê ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà
‚îÇ   ‚îú‚îÄ‚îÄ types/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ email.ts                    # ‚Üê ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà (optional)
‚îÇ   ‚îî‚îÄ‚îÄ app/
‚îÇ       ‚îî‚îÄ‚îÄ api/
‚îÇ           ‚îî‚îÄ‚îÄ admin/
‚îÇ               ‚îî‚îÄ‚îÄ sellers/
‚îÇ                   ‚îî‚îÄ‚îÄ [sellerId]/
‚îÇ                       ‚îî‚îÄ‚îÄ status/
‚îÇ                           ‚îî‚îÄ‚îÄ route.ts  # ‚Üê ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
‚îú‚îÄ‚îÄ .env.local                           # ‚Üê ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
‚îî‚îÄ‚îÄ THAIBULKSMS_EMAIL_INTEGRATION.md     # ‚Üê ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ô‡∏µ‡πâ
```

---

## ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1: ‡∏™‡∏£‡πâ‡∏≤‡∏á Email Service

‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå `src/lib/email/thaibulksms.ts`:

```typescript
/**
 * ThaiBulkSMS Email API Client
 *
 * ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏• transactional ‡∏ú‡πà‡∏≤‡∏ô ThaiBulkSMS API
 * ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Base64 authentication ‡πÅ‡∏•‡∏∞ retry logic
 */

import https from 'https';

interface EmailOptions {
  to: string;           // ‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö
  subject: string;      // ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏≠‡∏µ‡πÄ‡∏°‡∏•
  html: string;         // ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÅ‡∏ö‡∏ö HTML
  from?: string;        // ‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ú‡∏π‡πâ‡∏™‡πà‡∏á (optional)
  fromName?: string;    // ‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏™‡πà‡∏á (optional)
}

interface EmailResponse {
  success: boolean;
  message: string;
  data?: any;
  error?: any;
}

/**
 * ‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏• transactional ‡∏ú‡πà‡∏≤‡∏ô ThaiBulkSMS API
 */
export async function sendTransactionalEmail(
  options: EmailOptions
): Promise<EmailResponse> {
  try {
    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö API credentials
    const apiKey = process.env.THAIBULKSMS_API_KEY;
    const apiSecret = process.env.THAIBULKSMS_API_SECRET;

    if (!apiKey || !apiSecret) {
      throw new Error('ThaiBulkSMS API credentials not configured');
    }

    // ‡∏™‡∏£‡πâ‡∏≤‡∏á Base64 authentication
    const credentials = Buffer.from(`${apiKey}:${apiSecret}`).toString('base64');

    // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ñ‡πà‡∏≤ default
    const fromEmail = options.from || process.env.THAIBULKSMS_FROM_EMAIL || 'noreply@yourdomain.com';
    const fromName = options.fromName || process.env.THAIBULKSMS_FROM_NAME || 'Gography';

    // ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏° request body
    const postData = JSON.stringify({
      from: {
        email: fromEmail,
        name: fromName
      },
      to: [
        {
          email: options.to
        }
      ],
      subject: options.subject,
      html: options.html
    });

    // ‡∏™‡πà‡∏á HTTP request
    const response = await makeRequest(credentials, postData);

    console.log('[ThaiBulkSMS] Email sent successfully:', {
      to: options.to,
      subject: options.subject,
      timestamp: new Date().toISOString()
    });

    return {
      success: true,
      message: 'Email sent successfully',
      data: response
    };

  } catch (error: any) {
    console.error('[ThaiBulkSMS] Email send failed:', {
      error: error.message,
      to: options.to,
      timestamp: new Date().toISOString()
    });

    return {
      success: false,
      message: error.message || 'Failed to send email',
      error: error
    };
  }
}

/**
 * ‡∏ó‡∏≥ HTTP request ‡πÑ‡∏õ‡∏¢‡∏±‡∏á ThaiBulkSMS API
 * ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: URL ‡∏ô‡∏µ‡πâ‡∏≠‡∏≤‡∏à‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ï‡∏≤‡∏° API endpoint ‡∏à‡∏£‡∏¥‡∏á‡∏Ç‡∏≠‡∏á ThaiBulkSMS
 */
function makeRequest(credentials: string, postData: string): Promise<any> {
  return new Promise((resolve, reject) => {
    const options = {
      hostname: 'email-api.thaibulksms.com',
      port: 443,
      path: '/api/v1/email/send', // ‚ö†Ô∏è ‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö endpoint ‡∏à‡∏£‡∏¥‡∏á‡∏à‡∏≤‡∏Å ThaiBulkSMS
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Content-Length': Buffer.byteLength(postData),
        'Authorization': `Basic ${credentials}`,
        'Accept': 'application/json'
      }
    };

    const req = https.request(options, (res) => {
      let data = '';

      res.on('data', (chunk) => {
        data += chunk;
      });

      res.on('end', () => {
        if (res.statusCode && res.statusCode >= 200 && res.statusCode < 300) {
          try {
            const jsonData = JSON.parse(data);
            resolve(jsonData);
          } catch (e) {
            resolve({ message: data });
          }
        } else {
          reject(new Error(`API error: ${res.statusCode} - ${data}`));
        }
      });
    });

    req.on('error', (error) => {
      reject(error);
    });

    req.write(postData);
    req.end();
  });
}

/**
 * ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö credit balance
 */
export async function checkCreditBalance(): Promise<EmailResponse> {
  try {
    const apiKey = process.env.THAIBULKSMS_API_KEY;
    const apiSecret = process.env.THAIBULKSMS_API_SECRET;

    if (!apiKey || !apiSecret) {
      throw new Error('ThaiBulkSMS API credentials not configured');
    }

    const credentials = Buffer.from(`${apiKey}:${apiSecret}`).toString('base64');

    const options = {
      hostname: 'email-api.thaibulksms.com',
      port: 443,
      path: '/email/v1/credit',
      method: 'GET',
      headers: {
        'Authorization': `Basic ${credentials}`,
        'Accept': 'application/json'
      }
    };

    return new Promise((resolve, reject) => {
      const req = https.request(options, (res) => {
        let data = '';

        res.on('data', (chunk) => {
          data += chunk;
        });

        res.on('end', () => {
          if (res.statusCode && res.statusCode >= 200 && res.statusCode < 300) {
            try {
              const jsonData = JSON.parse(data);
              resolve({
                success: true,
                message: 'Credit balance retrieved',
                data: jsonData
              });
            } catch (e) {
              reject(new Error('Failed to parse response'));
            }
          } else {
            reject(new Error(`API error: ${res.statusCode}`));
          }
        });
      });

      req.on('error', (error) => {
        reject(error);
      });

      req.end();
    });

  } catch (error: any) {
    return {
      success: false,
      message: error.message,
      error: error
    };
  }
}
```

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏™‡∏£‡πâ‡∏≤‡∏á Email Templates

‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå `src/lib/email/templates.ts`:

```typescript
/**
 * Email Templates ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô Seller
 */

export interface SellerEmailData {
  sellerName: string;
  sellerEmail: string;
  approvedDate?: string;
  reason?: string;
  supportEmail: string;
}

/**
 * ‡πÄ‡∏ó‡∏°‡πÄ‡∏û‡∏•‡∏ï‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Seller ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥
 */
export function getApprovalEmailTemplate(data: SellerEmailData): string {
  return `
<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏ö‡∏±‡∏ç‡∏ä‡∏µ Seller</title>
  <style>
    body {
      font-family: 'Noto Sans Thai', Arial, sans-serif;
      line-height: 1.6;
      color: #333;
      max-width: 600px;
      margin: 0 auto;
      padding: 20px;
    }
    .header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 30px;
      text-align: center;
      border-radius: 10px 10px 0 0;
    }
    .header h1 {
      margin: 0;
      font-size: 24px;
    }
    .content {
      background: #ffffff;
      padding: 30px;
      border: 1px solid #e0e0e0;
      border-top: none;
    }
    .success-icon {
      text-align: center;
      font-size: 48px;
      margin: 20px 0;
    }
    .button {
      display: inline-block;
      background: #667eea;
      color: white;
      padding: 12px 30px;
      text-decoration: none;
      border-radius: 5px;
      margin: 20px 0;
      font-weight: bold;
    }
    .info-box {
      background: #f0f4ff;
      border-left: 4px solid #667eea;
      padding: 15px;
      margin: 20px 0;
    }
    .footer {
      background: #f8f9fa;
      padding: 20px;
      text-align: center;
      font-size: 12px;
      color: #666;
      border-radius: 0 0 10px 10px;
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>üéâ ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà Gography Seller Program!</h1>
  </div>

  <div class="content">
    <div class="success-icon">‚úÖ</div>

    <h2>‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏∏‡∏ì ${data.sellerName}</h2>

    <p>‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢! ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ Seller ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß</p>

    <div class="info-box">
      <strong>üìß ‡∏≠‡∏µ‡πÄ‡∏°‡∏•:</strong> ${data.sellerEmail}<br>
      <strong>üìÖ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥:</strong> ${data.approvedDate || new Date().toLocaleDateString('th-TH')}
    </div>

    <h3>‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ:</h3>
    <ol>
      <li><strong>‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</strong> - ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏°‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö Dashboard</li>
      <li><strong>‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ó‡∏£‡∏¥‡∏õ‡πÅ‡∏£‡∏Å</strong> - ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏û‡πá‡∏Ñ‡πÄ‡∏Å‡∏à‡∏ó‡∏£‡∏¥‡∏õ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</li>
      <li><strong>‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏£‡∏±‡∏ö Booking</strong> - ‡πÅ‡∏ä‡∏£‡πå‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</li>
      <li><strong>‡∏£‡∏±‡∏ö Commission</strong> - ‡∏£‡∏±‡∏ö commission ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</li>
    </ol>

    <div style="text-align: center;">
      <a href="${process.env.NEXT_PUBLIC_SITE_URL || 'https://seller.gography.com'}/auth/login" class="button">
        ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö Dashboard
      </a>
    </div>

    <h3>üìö ‡πÅ‡∏´‡∏•‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå:</h3>
    <ul>
      <li>‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Seller</li>
      <li>‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ó‡∏£‡∏¥‡∏õ‡∏ó‡∏µ‡πà‡∏ô‡πà‡∏≤‡∏™‡∏ô‡πÉ‡∏à</li>
      <li>‡∏£‡∏∞‡∏ö‡∏ö Commission ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏á‡∏¥‡∏ô</li>
      <li>‡∏£‡∏∞‡∏ö‡∏ö Coin ‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•</li>
    </ul>

    <p>‡∏´‡∏≤‡∏Å‡∏°‡∏µ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏£‡∏≤‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà:</p>
    <p>üìß Email: <a href="mailto:${data.supportEmail}">${data.supportEmail}</a></p>
  </div>

  <div class="footer">
    <p>¬© ${new Date().getFullYear()} Gography Seller Program. All rights reserved.</p>
    <p>‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ô‡∏µ‡πâ‡∏™‡πà‡∏á‡∏ñ‡∏∂‡∏á‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÄ‡∏õ‡πá‡∏ô Seller ‡∏ö‡∏ô‡πÅ‡∏û‡∏•‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤</p>
  </div>
</body>
</html>
  `.trim();
}

/**
 * ‡πÄ‡∏ó‡∏°‡πÄ‡∏û‡∏•‡∏ï‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Seller ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò
 */
export function getRejectionEmailTemplate(data: SellerEmailData): string {
  return `
<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡∏Å‡∏≤‡∏£‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡∏ö‡∏±‡∏ç‡∏ä‡∏µ Seller</title>
  <style>
    body {
      font-family: 'Noto Sans Thai', Arial, sans-serif;
      line-height: 1.6;
      color: #333;
      max-width: 600px;
      margin: 0 auto;
      padding: 20px;
    }
    .header {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      color: white;
      padding: 30px;
      text-align: center;
      border-radius: 10px 10px 0 0;
    }
    .header h1 {
      margin: 0;
      font-size: 24px;
    }
    .content {
      background: #ffffff;
      padding: 30px;
      border: 1px solid #e0e0e0;
      border-top: none;
    }
    .warning-icon {
      text-align: center;
      font-size: 48px;
      margin: 20px 0;
    }
    .reason-box {
      background: #fff3cd;
      border-left: 4px solid #ffc107;
      padding: 15px;
      margin: 20px 0;
    }
    .button {
      display: inline-block;
      background: #667eea;
      color: white;
      padding: 12px 30px;
      text-decoration: none;
      border-radius: 5px;
      margin: 20px 0;
      font-weight: bold;
    }
    .footer {
      background: #f8f9fa;
      padding: 20px;
      text-align: center;
      font-size: 12px;
      color: #666;
      border-radius: 0 0 10px 10px;
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>‡∏Å‡∏≤‡∏£‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡πÉ‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£ Seller</h1>
  </div>

  <div class="content">
    <div class="warning-icon">‚ö†Ô∏è</div>

    <h2>‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏∏‡∏ì ${data.sellerName}</h2>

    <p>‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏™‡∏ô‡πÉ‡∏à‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÄ‡∏õ‡πá‡∏ô Seller ‡∏Å‡∏±‡∏ö Gography Seller Program</p>

    <p>‡πÄ‡∏£‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡πÉ‡∏à‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏à‡πâ‡∏á‡πÉ‡∏´‡πâ‡∏ó‡∏£‡∏≤‡∏ö‡∏ß‡πà‡∏≤ ‡πÉ‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡πÉ‡∏ô‡∏Ç‡∏ì‡∏∞‡∏ô‡∏µ‡πâ</p>

    ${data.reason ? `
    <div class="reason-box">
      <strong>üìã ‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•:</strong><br>
      ${data.reason}
    </div>
    ` : ''}

    <h3>üîÑ ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á?</h3>
    <p>‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡πÄ‡∏°‡∏∑‡πà‡∏≠ ‡πÇ‡∏î‡∏¢‡∏Ñ‡∏≥‡∏ô‡∏∂‡∏á‡∏ñ‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡∏ô‡∏µ‡πâ:</p>
    <ul>
      <li>‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô‡πÅ‡∏•‡∏∞‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á</li>
      <li>‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏ñ‡πà‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô</li>
      <li>‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</li>
      <li>‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå‡∏ó‡∏µ‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÑ‡∏î‡πâ</li>
    </ul>

    <div style="text-align: center;">
      <a href="${process.env.NEXT_PUBLIC_SITE_URL || 'https://seller.gography.com'}/auth/register" class="button">
        ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á
      </a>
    </div>

    <h3>üí¨ ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠?</h3>
    <p>‡∏´‡∏≤‡∏Å‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤ ‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏£‡∏≤‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà:</p>
    <p>üìß Email: <a href="mailto:${data.supportEmail}">${data.supportEmail}</a></p>

    <p style="margin-top: 30px;">‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏ô‡πÉ‡∏à‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì ‡πÅ‡∏•‡∏∞‡∏´‡∏ß‡∏±‡∏á‡∏ß‡πà‡∏≤‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏£‡πà‡∏ß‡∏°‡∏á‡∏≤‡∏ô‡∏Å‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï</p>
  </div>

  <div class="footer">
    <p>¬© ${new Date().getFullYear()} Gography Seller Program. All rights reserved.</p>
    <p>‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ô‡∏µ‡πâ‡∏™‡πà‡∏á‡∏ñ‡∏∂‡∏á‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÄ‡∏õ‡πá‡∏ô Seller ‡∏ö‡∏ô‡πÅ‡∏û‡∏•‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤</p>
  </div>
</body>
</html>
  `.trim();
}

/**
 * ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ä‡πà‡∏ß‡∏¢‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á email subject
 */
export function getEmailSubject(status: 'approved' | 'rejected'): string {
  if (status === 'approved') {
    return 'üéâ ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢! ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ Seller ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÅ‡∏•‡πâ‡∏ß - Gography';
  } else {
    return 'üìã ‡∏Å‡∏≤‡∏£‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡πÉ‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£ Seller - Gography';
  }
}
```

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 3: ‡∏™‡∏£‡πâ‡∏≤‡∏á TypeScript Types (Optional)

‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå `src/types/email.ts`:

```typescript
/**
 * TypeScript types ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏µ‡πÄ‡∏°‡∏•
 */

export interface EmailOptions {
  to: string;
  subject: string;
  html: string;
  from?: string;
  fromName?: string;
}

export interface EmailResponse {
  success: boolean;
  message: string;
  data?: any;
  error?: any;
}

export interface SellerEmailData {
  sellerName: string;
  sellerEmail: string;
  approvedDate?: string;
  reason?: string;
  supportEmail: string;
}

export type EmailStatus = 'approved' | 'rejected';
```

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 4: ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç API Route

‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏ü‡∏•‡πå `src/app/api/admin/sellers/[sellerId]/status/route.ts`:

‡πÄ‡∏û‡∏¥‡πà‡∏° import statements ‡∏ó‡∏µ‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡∏Ç‡∏≠‡∏á‡πÑ‡∏ü‡∏•‡πå:

```typescript
// ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏ô‡∏™‡πà‡∏ß‡∏ô imports
import { sendTransactionalEmail } from '@/lib/email/thaibulksms';
import {
  getApprovalEmailTemplate,
  getRejectionEmailTemplate,
  getEmailSubject
} from '@/lib/email/templates';
```

‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô `PATCH` ‡πÇ‡∏î‡∏¢‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å update status ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à:

```typescript
// ‡∏´‡∏≤‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà update status ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 70-75)
// ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏à‡∏≤‡∏Å:
return NextResponse.json({
  seller: updatedSeller
})

// ‡πÄ‡∏õ‡πá‡∏ô:
// ‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô Seller (non-blocking)
if (updatedSeller.email) {
  const supportEmail = process.env.NEXT_PUBLIC_SUPPORT_EMAIL || 'support@gography.com';

  const emailData = {
    sellerName: updatedSeller.full_name || 'Seller',
    sellerEmail: updatedSeller.email,
    approvedDate: new Date().toLocaleDateString('th-TH', {
      year: 'numeric',
      month: 'long',
      day: 'numeric'
    }),
    reason: status === 'rejected' ? reason : undefined,
    supportEmail: supportEmail
  };

  // ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å template ‡∏ï‡∏≤‡∏° status
  const emailTemplate = status === 'approved'
    ? getApprovalEmailTemplate(emailData)
    : getRejectionEmailTemplate(emailData);

  // ‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏• (‡πÅ‡∏ö‡∏ö asynchronous - ‡πÑ‡∏°‡πà block response)
  sendTransactionalEmail({
    to: updatedSeller.email,
    subject: getEmailSubject(status),
    html: emailTemplate
  }).then((result) => {
    if (result.success) {
      console.log(`[Email] Notification sent to ${updatedSeller.email} for status: ${status}`);
    } else {
      console.error(`[Email] Failed to send notification to ${updatedSeller.email}:`, result.error);
    }
  }).catch((error) => {
    console.error('[Email] Unexpected error:', error);
  });
} else {
  console.warn(`[Email] Seller ${sellerId} has no email address, skipping notification`);
}

return NextResponse.json({
  seller: updatedSeller,
  emailSent: !!updatedSeller.email // ‡∏ö‡∏≠‡∏Å client ‡∏ß‡πà‡∏≤‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
})
```

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 5: ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Environment Variables

‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏ü‡∏•‡πå `.env.local`:

```env
# ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ
THAIBULKSMS_API_KEY=your_api_key_here
THAIBULKSMS_API_SECRET=your_api_secret_here
THAIBULKSMS_FROM_EMAIL=noreply@gography.com
THAIBULKSMS_FROM_NAME=Gography Seller Program
NEXT_PUBLIC_SUPPORT_EMAIL=support@gography.com
```

**‚ö†Ô∏è ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç:** ‡∏≠‡∏¢‡πà‡∏≤ commit ‡πÑ‡∏ü‡∏•‡πå `.env.local` ‡πÄ‡∏Ç‡πâ‡∏≤ git repository!

---

## API Documentation

### Authentication

ThaiBulkSMS API ‡πÉ‡∏ä‡πâ **HTTP Basic Authentication** ‡πÅ‡∏ö‡∏ö Base64 encoding

**Format:**
```
Authorization: Basic [base64(api_key:api_secret)]
```

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:**
```javascript
const apiKey = 'your_api_key';
const apiSecret = 'your_api_secret';
const credentials = Buffer.from(`${apiKey}:${apiSecret}`).toString('base64');

// ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô header
headers: {
  'Authorization': `Basic ${credentials}`
}
```

### API Endpoints

#### 1. ‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏• Transactional

**‚ö†Ô∏è ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:** URL ‡πÅ‡∏•‡∏∞ endpoint ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á ‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏±‡∏ö ThaiBulkSMS documentation ‡∏à‡∏£‡∏¥‡∏á

```
POST https://email-api.thaibulksms.com/api/v1/email/send
```

**Request Headers:**
```
Content-Type: application/json
Authorization: Basic [base64_credentials]
Accept: application/json
```

**Request Body:**
```json
{
  "from": {
    "email": "noreply@yourdomain.com",
    "name": "Your Company"
  },
  "to": [
    {
      "email": "recipient@example.com"
    }
  ],
  "subject": "Email Subject",
  "html": "<html>...</html>"
}
```

**Response Success (200):**
```json
{
  "status": "success",
  "message": "Email sent successfully",
  "data": {
    "message_id": "abc123xyz",
    "timestamp": "2025-01-06T10:30:00Z"
  }
}
```

**Response Error (4xx/5xx):**
```json
{
  "code": 400,
  "statusText": "Bad Request",
  "message": {
    "detail": {},
    "message": "Invalid Parameter"
  }
}
```

#### 2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Credit Balance

```
GET https://email-api.thaibulksms.com/email/v1/credit
```

**Request Headers:**
```
Authorization: Basic [base64_credentials]
Accept: application/json
```

**Response:**
```json
{
  "credit": 1000.50,
  "currency": "THB"
}
```

### Error Codes

| Code | Message | ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ |
|------|---------|----------|
| 400 | Bad Request | ‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á |
| 401 | Unauthorized | API credentials ‡∏ú‡∏¥‡∏î |
| 403 | Forbidden | ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á |
| 429 | Too Many Requests | ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏°‡∏≤‡∏Å‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ (rate limit) |
| 500 | Internal Server Error | ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö |

---

## Code Examples

### ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà 1: ‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ Seller

```typescript
import { sendTransactionalEmail } from '@/lib/email/thaibulksms';
import { getApprovalEmailTemplate, getEmailSubject } from '@/lib/email/templates';

async function sendApprovalEmail(seller: any) {
  const emailData = {
    sellerName: seller.full_name || 'Seller',
    sellerEmail: seller.email,
    approvedDate: new Date().toLocaleDateString('th-TH'),
    supportEmail: 'support@gography.com'
  };

  const result = await sendTransactionalEmail({
    to: seller.email,
    subject: getEmailSubject('approved'),
    html: getApprovalEmailTemplate(emailData)
  });

  if (result.success) {
    console.log('‚úÖ Email sent successfully');
  } else {
    console.error('‚ùå Failed to send email:', result.error);
  }
}
```

### ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà 2: ‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò Seller

```typescript
async function sendRejectionEmail(seller: any, reason: string) {
  const emailData = {
    sellerName: seller.full_name || 'Seller',
    sellerEmail: seller.email,
    reason: reason,
    supportEmail: 'support@gography.com'
  };

  const result = await sendTransactionalEmail({
    to: seller.email,
    subject: getEmailSubject('rejected'),
    html: getRejectionEmailTemplate(emailData)
  });

  return result;
}
```

### ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà 3: ‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÅ‡∏ö‡∏ö Non-blocking

```typescript
// ‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå (‡πÑ‡∏°‡πà block response)
sendTransactionalEmail({
  to: 'seller@example.com',
  subject: 'Test Email',
  html: '<h1>Hello</h1>'
}).then((result) => {
  console.log('Email result:', result);
}).catch((error) => {
  console.error('Email error:', error);
});

// Response ‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÉ‡∏´‡πâ client ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
return NextResponse.json({ success: true });
```

### ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà 4: Error Handling

```typescript
try {
  const result = await sendTransactionalEmail({
    to: seller.email,
    subject: 'Test',
    html: '<h1>Test</h1>'
  });

  if (!result.success) {
    // Log error ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà throw exception
    console.error('Email failed:', result.message);

    // Optional: ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ß‡πâ‡πÉ‡∏ô database ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö retry ‡∏†‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏á
    await logFailedEmail({
      to: seller.email,
      error: result.message,
      timestamp: new Date()
    });
  }
} catch (error) {
  // Catch unexpected errors
  console.error('Unexpected email error:', error);
}

// ‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡πÅ‡∏°‡πâ‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏™‡πà‡∏á‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
return NextResponse.json({ success: true });
```

### ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà 5: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Credit Balance

```typescript
import { checkCreditBalance } from '@/lib/email/thaibulksms';

async function checkEmailCredit() {
  const result = await checkCreditBalance();

  if (result.success) {
    console.log('Credit balance:', result.data);

    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ credit ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏ô‡πâ‡∏≠‡∏¢
    if (result.data.credit < 100) {
      console.warn('‚ö†Ô∏è Low credit balance!');
      // ‡∏™‡πà‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÑ‡∏õ‡∏¢‡∏±‡∏á admin
    }
  } else {
    console.error('Failed to check credit:', result.message);
  }
}
```

---

## Email Templates

### ‡πÄ‡∏ó‡∏°‡πÄ‡∏û‡∏•‡∏ï‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥

**‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:**
```typescript
const html = getApprovalEmailTemplate({
  sellerName: '‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡πÉ‡∏à‡∏î‡∏µ',
  sellerEmail: 'somchai@example.com',
  approvedDate: '6 ‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏° 2568',
  supportEmail: 'support@gography.com'
});
```

**‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ:**
- `sellerName` - ‡∏ä‡∏∑‡πà‡∏≠ Seller
- `sellerEmail` - ‡∏≠‡∏µ‡πÄ‡∏°‡∏• Seller
- `approvedDate` - ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ (optional, default: ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô)
- `supportEmail` - ‡∏≠‡∏µ‡πÄ‡∏°‡∏• support

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå:**

![Approval Email Preview]

```
üéâ ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà Gography Seller Program!

‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏∏‡∏ì ‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡πÉ‡∏à‡∏î‡∏µ

‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢! ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ Seller ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß

üìß ‡∏≠‡∏µ‡πÄ‡∏°‡∏•: somchai@example.com
üìÖ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥: 6 ‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏° 2568

‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ:
1. ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö - ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏°‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö Dashboard
2. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ó‡∏£‡∏¥‡∏õ‡πÅ‡∏£‡∏Å - ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏û‡πá‡∏Ñ‡πÄ‡∏Å‡∏à‡∏ó‡∏£‡∏¥‡∏õ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
3. ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏£‡∏±‡∏ö Booking - ‡πÅ‡∏ä‡∏£‡πå‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤
4. ‡∏£‡∏±‡∏ö Commission - ‡∏£‡∏±‡∏ö commission ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à

[‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö Dashboard]
```

### ‡πÄ‡∏ó‡∏°‡πÄ‡∏û‡∏•‡∏ï‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò

**‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:**
```typescript
const html = getRejectionEmailTemplate({
  sellerName: '‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡πÉ‡∏à‡∏î‡∏µ',
  sellerEmail: 'somchai@example.com',
  reason: '‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î ID card ‡∏ó‡∏µ‡πà‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô',
  supportEmail: 'support@gography.com'
});
```

**‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ:**
- `sellerName` - ‡∏ä‡∏∑‡πà‡∏≠ Seller
- `sellerEmail` - ‡∏≠‡∏µ‡πÄ‡∏°‡∏• Seller
- `reason` - ‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡∏ó‡∏µ‡πà‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò (optional)
- `supportEmail` - ‡∏≠‡∏µ‡πÄ‡∏°‡∏• support

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå:**

```
‡∏Å‡∏≤‡∏£‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡πÉ‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£ Seller

‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏∏‡∏ì ‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡πÉ‡∏à‡∏î‡∏µ

‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏™‡∏ô‡πÉ‡∏à‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÄ‡∏õ‡πá‡∏ô Seller ‡∏Å‡∏±‡∏ö Gography Seller Program

‡πÄ‡∏£‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡πÉ‡∏à‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏à‡πâ‡∏á‡πÉ‡∏´‡πâ‡∏ó‡∏£‡∏≤‡∏ö‡∏ß‡πà‡∏≤ ‡πÉ‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡πÉ‡∏ô‡∏Ç‡∏ì‡∏∞‡∏ô‡∏µ‡πâ

üìã ‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•:
‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î ID card ‡∏ó‡∏µ‡πà‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô

üîÑ ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á?
‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡πÄ‡∏°‡∏∑‡πà‡∏≠
```

### ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏á Template

**‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏µ/‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö:**

‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÉ‡∏ô `<style>` section ‡∏Ç‡∏≠‡∏á template:

```html
<style>
  /* ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ‡∏´‡∏•‡∏±‡∏Å */
  .header {
    background: linear-gradient(135deg, #YOUR_COLOR_1 0%, #YOUR_COLOR_2 100%);
  }

  /* ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ‡∏õ‡∏∏‡πà‡∏° */
  .button {
    background: #YOUR_BUTTON_COLOR;
  }
</style>
```

**‡πÄ‡∏û‡∏¥‡πà‡∏° Logo:**

```html
<div class="header">
  <img src="https://yourdomain.com/logo.png" alt="Logo" style="max-width: 150px;">
  <h1>‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö!</h1>
</div>
```

**‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©:**

```html
<h2>‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏∏‡∏ì ${data.sellerName}</h2>
<p>Hello ${data.sellerName}</p>

<p>‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢! ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ Seller ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß</p>
<p>Congratulations! Your Seller account has been approved.</p>
```

---

## ‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö

#### 1. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏î‡πâ‡∏ß‡∏¢ Test Email

‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå `test-email.ts` ‡πÉ‡∏ô‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå root:

```typescript
import { sendTransactionalEmail } from './src/lib/email/thaibulksms';
import { getApprovalEmailTemplate } from './src/lib/email/templates';

async function testEmail() {
  console.log('üß™ Testing ThaiBulkSMS Email...');

  const result = await sendTransactionalEmail({
    to: 'your-test-email@example.com', // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
    subject: 'üß™ Test Email - Gography',
    html: getApprovalEmailTemplate({
      sellerName: 'Test User',
      sellerEmail: 'test@example.com',
      supportEmail: 'support@gography.com'
    })
  });

  console.log('Result:', result);
}

testEmail();
```

‡∏£‡∏±‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á:
```bash
npx tsx test-email.ts
```

#### 2. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ Seller

1. ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡πâ‡∏ß‡∏¢‡∏ö‡∏±‡∏ç‡∏ä‡∏µ Admin
2. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà `/dashboard/admin/sellers`
3. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Seller ‡∏ó‡∏µ‡πà‡∏°‡∏µ status = pending
4. ‡∏Ñ‡∏•‡∏¥‡∏Å "‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥"
5. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö:
   - ‚úÖ Status ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô approved
   - ‚úÖ Toast notification ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•
   - ‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ó‡∏µ‡πà seller ‡∏£‡∏∞‡∏ö‡∏∏‡πÑ‡∏ß‡πâ

#### 3. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò Seller

1. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Seller ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò
2. ‡∏Ñ‡∏•‡∏¥‡∏Å "‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò"
3. ‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏• (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
4. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Ç‡πâ‡∏≠ 2

#### 4. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Error Handling

**‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà 1: API credentials ‡∏ú‡∏¥‡∏î**
```bash
# ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç .env.local ‡πÉ‡∏´‡πâ credentials ‡∏ú‡∏¥‡∏î
THAIBULKSMS_API_KEY=invalid_key

# ‡∏£‡∏±‡∏ô test
npx tsx test-email.ts

# ‡∏Ñ‡∏ß‡∏£‡πÑ‡∏î‡πâ error message: "API error: 401"
```

**‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà 2: Email ‡∏ú‡∏¥‡∏î format**
```typescript
await sendTransactionalEmail({
  to: 'invalid-email', // email ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
  subject: 'Test',
  html: '<h1>Test</h1>'
});

// ‡∏Ñ‡∏ß‡∏£‡πÑ‡∏î‡πâ error message ‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö invalid email
```

**‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà 3: Network error**
```typescript
// Disconnect internet ‡πÅ‡∏•‡∏∞‡∏£‡∏±‡∏ô test
// ‡∏Ñ‡∏ß‡∏£‡πÑ‡∏î‡πâ error message ‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö network
```

### Test Cases

| Test Case | Expected Result | Status |
|-----------|----------------|--------|
| ‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ Seller | ‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ñ‡∏∂‡∏á seller ‡∏û‡∏£‡πâ‡∏≠‡∏° template ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ | ‚¨ú |
| ‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò Seller | ‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ñ‡∏∂‡∏á seller ‡∏û‡∏£‡πâ‡∏≠‡∏° template ‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò | ‚¨ú |
| API credentials ‡∏ú‡∏¥‡∏î | Log error ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà block ‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ | ‚¨ú |
| Seller ‡πÑ‡∏°‡πà‡∏°‡∏µ email | Skip ‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏û‡∏£‡πâ‡∏≠‡∏° log warning | ‚¨ú |
| Network error | Log error ‡πÅ‡∏•‡∏∞ retry (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ) | ‚¨ú |
| HTML template render | ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á | ‚¨ú |
| Thai characters | ‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á | ‚¨ú |
| Links in email | Links ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÑ‡∏î‡πâ‡πÅ‡∏•‡∏∞‡∏ô‡∏≥‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á | ‚¨ú |

### ‡∏Å‡∏≤‡∏£‡∏î‡∏π Logs

**1. Server Logs:**
```bash
npm run dev

# ‡∏î‡∏π‡πÉ‡∏ô terminal ‡∏à‡∏∞‡∏°‡∏µ log messages:
# [ThaiBulkSMS] Email sent successfully: { to: '...', subject: '...', ... }
# [Email] Notification sent to seller@example.com for status: approved
```

**2. Browser Console:**
```javascript
// ‡πÄ‡∏õ‡∏¥‡∏î Network tab ‡πÉ‡∏ô DevTools
// ‡∏î‡∏π request ‡πÑ‡∏õ‡∏ó‡∏µ‡πà /api/admin/sellers/[id]/status
// ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö response: { seller: {...}, emailSent: true }
```

**3. ThaiBulkSMS Dashboard:**
- ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏µ‡πà https://www.thaibulksms.com
- ‡∏î‡∏π‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö credit balance

---

## Troubleshooting

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏ö‡πà‡∏≠‡∏¢

#### 1. ‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏™‡πà‡∏á‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à

**‡∏≠‡∏≤‡∏Å‡∏≤‡∏£:**
```
[ThaiBulkSMS] Email send failed: API error: 401
```

**‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ:**
- ‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö `THAIBULKSMS_API_KEY` ‡πÅ‡∏•‡∏∞ `THAIBULKSMS_API_SECRET` ‡πÉ‡∏ô `.env.local`
- ‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ API credentials ‡∏¢‡∏±‡∏á‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ
- ‚úÖ Login ‡πÄ‡∏Ç‡πâ‡∏≤ ThaiBulkSMS dashboard ‡πÅ‡∏•‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö API key status

#### 2. Email ‡πÑ‡∏°‡πà‡∏ñ‡∏∂‡∏á‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö

**‡∏≠‡∏≤‡∏Å‡∏≤‡∏£:** API ‡∏™‡πà‡∏á success ‡πÅ‡∏ï‡πà‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏≠‡∏µ‡πÄ‡∏°‡∏•

**‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ:**
- ‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö spam folder ‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö
- ‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ `to` email address ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
- ‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö SPF/DKIM records ‡∏Ç‡∏≠‡∏á domain
- ‚úÖ ‡∏î‡∏π‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡πÉ‡∏ô ThaiBulkSMS dashboard

#### 3. Thai characters ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏ú‡∏¥‡∏î

**‡∏≠‡∏≤‡∏Å‡∏≤‡∏£:** ‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏õ‡πá‡∏ô `???` ‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡∏û‡∏¥‡πÄ‡∏®‡∏©

**‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ:**
```html
<!-- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏ô <head> ‡∏Ç‡∏≠‡∏á email template -->
<meta charset="UTF-8">
```

#### 4. Environment variables ‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô

**‡∏≠‡∏≤‡∏Å‡∏≤‡∏£:**
```
ThaiBulkSMS API credentials not configured
```

**‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ:**
- ‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (case-sensitive)
- ‚úÖ Restart Next.js dev server ‡∏´‡∏•‡∏±‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç `.env.local`
```bash
# ‡∏´‡∏¢‡∏∏‡∏î server (Ctrl+C)
# ‡∏£‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà
npm run dev
```
- ‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÑ‡∏ü‡∏•‡πå‡∏ä‡∏∑‡πà‡∏≠ `.env.local` ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà `.env` ‡∏´‡∏£‡∏∑‡∏≠ `.env.production`

#### 5. API endpoint ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á

**‡∏≠‡∏≤‡∏Å‡∏≤‡∏£:**
```
API error: 404 - Not Found
```

**‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ:**
- ‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö API endpoint URL ‡πÉ‡∏ô `thaibulksms.ts`
- ‚úÖ ‡∏î‡∏π ThaiBulkSMS documentation ‡πÄ‡∏û‡∏∑‡πà‡∏≠ confirm endpoint ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
- ‚úÖ ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠ ThaiBulkSMS support ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ç‡∏≠ documentation

#### 6. Rate limit error

**‡∏≠‡∏≤‡∏Å‡∏≤‡∏£:**
```
API error: 429 - Too Many Requests
```

**‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ:**
- ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏° retry logic ‡∏û‡∏£‡πâ‡∏≠‡∏° delay
- ‚úÖ ‡∏•‡∏î frequency ‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•
- ‚úÖ ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠ ThaiBulkSMS ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏° rate limit

#### 7. Credit ‡∏´‡∏°‡∏î

**‡∏≠‡∏≤‡∏Å‡∏≤‡∏£:**
```
API error: 402 - Insufficient Credit
```

**‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ:**
- ‚úÖ ‡πÄ‡∏ï‡∏¥‡∏° credit ‡∏ó‡∏µ‡πà ThaiBulkSMS dashboard
- ‚úÖ ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ alert ‡πÄ‡∏°‡∏∑‡πà‡∏≠ credit ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏ô‡πâ‡∏≠‡∏¢
```typescript
const result = await checkCreditBalance();
if (result.success && result.data.credit < 100) {
  // ‡∏™‡πà‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÑ‡∏õ‡∏¢‡∏±‡∏á admin
}
```

### ‡∏Å‡∏≤‡∏£ Debug

#### ‡πÄ‡∏õ‡∏¥‡∏î Debug Mode

‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏ü‡∏•‡πå `thaibulksms.ts`:

```typescript
const DEBUG = true; // ‡πÄ‡∏õ‡∏¥‡∏î debug mode

if (DEBUG) {
  console.log('[DEBUG] Request options:', {
    hostname: options.hostname,
    path: options.path,
    method: options.method,
    headers: {
      ...options.headers,
      'Authorization': 'Basic [REDACTED]' // ‡πÑ‡∏°‡πà‡πÅ‡∏™‡∏î‡∏á credentials
    }
  });

  console.log('[DEBUG] Request body:', postData);
}
```

#### ‡∏ó‡∏î‡∏™‡∏≠‡∏ö API ‡∏î‡πâ‡∏ß‡∏¢ curl

```bash
# Test authentication
curl -X GET \
  https://email-api.thaibulksms.com/email/v1/credit \
  -H "Authorization: Basic $(echo -n 'api_key:api_secret' | base64)" \
  -H "Accept: application/json"

# Test send email
curl -X POST \
  https://email-api.thaibulksms.com/api/v1/email/send \
  -H "Authorization: Basic $(echo -n 'api_key:api_secret' | base64)" \
  -H "Content-Type: application/json" \
  -d '{
    "from": {"email": "test@example.com", "name": "Test"},
    "to": [{"email": "recipient@example.com"}],
    "subject": "Test",
    "html": "<h1>Test</h1>"
  }'
```

---

## Best Practices

### 1. ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Errors

**‚úÖ ‡∏ó‡∏≥:**
```typescript
// Non-blocking: ‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß‡πÑ‡∏°‡πà‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß
sendTransactionalEmail({...})
  .then(result => console.log('Email sent'))
  .catch(error => console.error('Email failed'));

return NextResponse.json({ success: true });
```

**‚ùå ‡πÑ‡∏°‡πà‡∏ó‡∏≥:**
```typescript
// Blocking: ‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß‡∏î‡πâ‡∏ß‡∏¢
const result = await sendTransactionalEmail({...});
if (!result.success) {
  throw new Error('Email failed');
}
```

### 2. Retry Logic

```typescript
async function sendEmailWithRetry(
  options: EmailOptions,
  maxRetries = 3
): Promise<EmailResponse> {
  for (let i = 0; i < maxRetries; i++) {
    const result = await sendTransactionalEmail(options);

    if (result.success) {
      return result;
    }

    // Exponential backoff: 1s, 2s, 4s
    if (i < maxRetries - 1) {
      await new Promise(resolve => setTimeout(resolve, Math.pow(2, i) * 1000));
    }
  }

  return {
    success: false,
    message: `Failed after ${maxRetries} retries`
  };
}
```

### 3. Email Queue (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏°‡∏≤‡∏Å)

‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏°‡∏≤‡∏Å ‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ queue system:

```typescript
// ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÉ‡∏ä‡πâ Bull Queue
import Queue from 'bull';

const emailQueue = new Queue('email', {
  redis: {
    host: 'localhost',
    port: 6379
  }
});

// ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤ queue
emailQueue.add('send-email', {
  to: 'seller@example.com',
  subject: 'Test',
  html: '<h1>Test</h1>'
});

// Process queue
emailQueue.process('send-email', async (job) => {
  return await sendTransactionalEmail(job.data);
});
```

### 4. Logging ‡πÅ‡∏•‡∏∞ Monitoring

```typescript
// Log successful sends
console.log('[Email Success]', {
  to: options.to,
  subject: options.subject,
  timestamp: new Date().toISOString(),
  messageId: response.data?.message_id
});

// Log failures
console.error('[Email Failed]', {
  to: options.to,
  error: error.message,
  timestamp: new Date().toISOString()
});

// Optional: ‡∏™‡πà‡∏á‡πÑ‡∏õ monitoring service
await sendToMonitoring({
  type: 'email_failed',
  details: {...}
});
```

### 5. Security Considerations

**‚úÖ ‡∏ó‡∏≥:**
- ‡πÄ‡∏Å‡πá‡∏ö API credentials ‡πÉ‡∏ô environment variables
- ‡πÉ‡∏ä‡πâ HTTPS ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏∏‡∏Å requests
- Validate email addresses ‡∏Å‡πà‡∏≠‡∏ô‡∏™‡πà‡∏á
- Rate limit API calls
- Log ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô (‡πÑ‡∏°‡πà log email content)

**‚ùå ‡πÑ‡∏°‡πà‡∏ó‡∏≥:**
- Hardcode API credentials ‡πÉ‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î
- Commit `.env.local` ‡πÄ‡∏Ç‡πâ‡∏≤ git
- ‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÑ‡∏õ‡∏¢‡∏±‡∏á addresses ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ validate
- Log sensitive data (passwords, tokens)
- ‡∏õ‡∏•‡πà‡∏≠‡∏¢‡πÉ‡∏´‡πâ‡πÉ‡∏Ñ‡∏£‡∏Å‡πá‡πÑ‡∏î‡πâ trigger email sending

### 6. Testing

```typescript
// ‡πÉ‡∏ä‡πâ mock ‡πÉ‡∏ô‡∏Ç‡∏ì‡∏∞ test
if (process.env.NODE_ENV === 'test') {
  return {
    success: true,
    message: 'Mock email sent'
  };
}

// ‡πÉ‡∏ä‡πâ test emails ‡πÉ‡∏ô development
const testMode = process.env.NODE_ENV === 'development';
const recipient = testMode ? 'test@example.com' : options.to;
```

### 7. Email Template Management

```typescript
// ‡πÅ‡∏¢‡∏Å templates ‡πÄ‡∏õ‡πá‡∏ô external files
// src/lib/email/templates/approval.html
// src/lib/email/templates/rejection.html

import fs from 'fs';
import path from 'path';

function loadTemplate(name: string): string {
  const templatePath = path.join(
    process.cwd(),
    'src/lib/email/templates',
    `${name}.html`
  );
  return fs.readFileSync(templatePath, 'utf-8');
}

// Render template with data
function renderTemplate(template: string, data: any): string {
  return template.replace(/\{\{(\w+)\}\}/g, (match, key) => {
    return data[key] || '';
  });
}
```

---

## ‡∏†‡∏≤‡∏Ñ‡∏ú‡∏ô‡∏ß‡∏Å

### A. ThaiBulkSMS Pricing

**‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô:**
- 0.04 ‡∏ö‡∏≤‡∏ó/‡∏≠‡∏µ‡πÄ‡∏°‡∏• (‡πÅ‡∏û‡πá‡∏Ñ‡πÄ‡∏Å‡∏à‡∏Ç‡∏ô‡∏≤‡∏î‡πÉ‡∏´‡∏ç‡πà)
- ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏≠‡∏≤‡∏à‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

**‡πÅ‡∏û‡πá‡∏Ñ‡πÄ‡∏Å‡∏à:**
| ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏≠‡∏µ‡πÄ‡∏°‡∏• | ‡∏£‡∏≤‡∏Ñ‡∏≤/‡∏≠‡∏µ‡πÄ‡∏°‡∏• | ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ß‡∏° |
|------------|------------|----------|
| 1,000 | 0.05 ‡∏ö‡∏≤‡∏ó | 50 ‡∏ö‡∏≤‡∏ó |
| 10,000 | 0.045 ‡∏ö‡∏≤‡∏ó | 450 ‡∏ö‡∏≤‡∏ó |
| 100,000 | 0.04 ‡∏ö‡∏≤‡∏ó | 4,000 ‡∏ö‡∏≤‡∏ó |

### B. Rate Limits

**SMS Service:**
- Up to 120 TPS (Transactions Per Second)

**Email Service:**
- ‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠ ThaiBulkSMS support ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏°

### C. ‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠ Support

**ThaiBulkSMS:**
- üìß Email: patipan@1moby.com, kanika@1moby.com
- üìû ‡πÇ‡∏ó‡∏£: 02-798-6055
- üåê Website: https://www.thaibulksms.com
- üìö Developer Portal: https://developer.thaibulksms.com

**ThaiBulkMail:**
- üåê Website: https://www.thaibulkmail.com

### D. Related Documentation

**‡∏†‡∏≤‡∏¢‡πÉ‡∏ô Project:**
- `CLAUDE.md` - ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ
- `COIN_SYSTEM_GUIDE.md` - ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏£‡∏∞‡∏ö‡∏ö Coin
- `TRIPS_API_OPTIMIZATION_GUIDE.md` - ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠ optimization

**‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å:**
- [ThaiBulkSMS API Docs](https://developer.thaibulksms.com)
- [Next.js Documentation](https://nextjs.org/docs)
- [Supabase Documentation](https://supabase.com/docs)

### E. Changelog

**Version 1.0.0 (2025-01-06)**
- ‚úÖ Initial integration with ThaiBulkSMS Email API
- ‚úÖ Seller approval/rejection email notifications
- ‚úÖ Thai language email templates
- ‚úÖ Error handling and logging
- ‚úÖ Documentation in Thai

---

## ‡∏™‡∏£‡∏∏‡∏õ

‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏•‡∏∏‡∏°‡∏ó‡∏∏‡∏Å‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ ThaiBulkSMS Email API ‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏±‡∏ö‡∏£‡∏∞‡∏ö‡∏ö Gography Seller Program:

1. ‚úÖ **‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤** - ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 15-30 ‡∏ô‡∏≤‡∏ó‡∏µ
2. ‚úÖ **Email Templates** - ‡πÄ‡∏ó‡∏°‡πÄ‡∏û‡∏•‡∏ï‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏°‡πÅ‡∏•‡∏∞‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢
3. ‚úÖ **Error Handling** - ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°
4. ‚úÖ **Best Practices** - ‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö production
5. ‚úÖ **Testing Guide** - ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î
6. ‚úÖ **Troubleshooting** - ‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏ö‡πà‡∏≠‡∏¢

**‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ:**
1. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ environment variables
2. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå‡∏ï‡∏≤‡∏°‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠
3. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•
4. Deploy to production

**‡∏´‡∏≤‡∏Å‡∏°‡∏µ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°:**
- ‡∏≠‡πà‡∏≤‡∏ô [Troubleshooting](#troubleshooting) section
- ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠ ThaiBulkSMS support
- ‡∏™‡∏£‡πâ‡∏≤‡∏á issue ‡πÉ‡∏ô project repository

---

*‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠ 6 ‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏° 2568*
*Last updated: 6 ‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏° 2568*
