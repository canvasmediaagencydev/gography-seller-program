# à¸£à¸°à¸šà¸š Coins - Flow à¹à¸¥à¸°à¸à¸²à¸£à¸—à¸³à¸‡à¸²à¸™

à¹€à¸­à¸à¸ªà¸²à¸£à¸ªà¸³à¸«à¸£à¸±à¸šà¸à¸²à¸£à¸›à¸£à¸°à¸Šà¸¸à¸¡à¸­à¸˜à¸´à¸šà¸²à¸¢à¸à¸²à¸£à¸—à¸³à¸‡à¸²à¸™à¸‚à¸­à¸‡à¸£à¸°à¸šà¸š Coins

**à¸§à¸±à¸™à¸—à¸µà¹ˆà¸­à¸±à¸›à¹€à¸”à¸•**: 20 à¸•à¸¸à¸¥à¸²à¸„à¸¡ 2025

---

## ğŸ“‹ à¸ªà¸²à¸£à¸šà¸±à¸

1. [à¸ à¸²à¸à¸£à¸§à¸¡à¸£à¸°à¸šà¸š](#à¸ à¸²à¸à¸£à¸§à¸¡à¸£à¸°à¸šà¸š)
2. [Flow à¸«à¸¥à¸±à¸à¸‚à¸­à¸‡à¸£à¸°à¸šà¸š](#flow-à¸«à¸¥à¸±à¸à¸‚à¸­à¸‡à¸£à¸°à¸šà¸š)
3. [User Flows](#user-flows)
4. [Technical Flow](#technical-flow)
5. [Database Flow](#database-flow)
6. [Business Rules](#business-rules)

---

## ğŸ¯ à¸ à¸²à¸à¸£à¸§à¸¡à¸£à¸°à¸šà¸š

### à¸§à¸±à¸•à¸–à¸¸à¸›à¸£à¸°à¸ªà¸‡à¸„à¹Œ
à¸£à¸°à¸šà¸š Coins à¹€à¸›à¹‡à¸™à¸£à¸°à¸šà¸šà¸ªà¸°à¸ªà¸¡à¸„à¸°à¹à¸™à¸™à¹à¸¥à¸°à¸£à¸²à¸‡à¸§à¸±à¸¥à¸ªà¸³à¸«à¸£à¸±à¸š Seller à¹€à¸à¸·à¹ˆà¸­:
- **à¸à¸£à¸°à¸•à¸¸à¹‰à¸™à¸¢à¸­à¸”à¸‚à¸²à¸¢**: à¹ƒà¸«à¹‰à¸£à¸²à¸‡à¸§à¸±à¸¥à¹€à¸¡à¸·à¹ˆà¸­à¸‚à¸²à¸¢à¸ªà¸³à¹€à¸£à¹‡à¸ˆ
- **à¸ªà¸£à¹‰à¸²à¸‡à¹à¸£à¸‡à¸ˆà¸¹à¸‡à¹ƒà¸ˆ**: à¸¡à¸µ Campaign à¹‚à¸šà¸™à¸±à¸ªà¸à¸´à¹€à¸¨à¸©
- **à¸ªà¸£à¹‰à¸²à¸‡à¸£à¸°à¸šà¸š Referral**: Seller à¹„à¸”à¹‰à¹€à¸«à¸£à¸µà¸¢à¸à¹€à¸¡à¸·à¹ˆà¸­à¸Šà¸§à¸™à¸„à¸™à¸­à¸·à¹ˆà¸™
- **à¹à¸¥à¸à¹€à¸›à¹‡à¸™à¹€à¸‡à¸´à¸™**: à¹à¸¥à¸à¹€à¸«à¸£à¸µà¸¢à¸à¹€à¸›à¹‡à¸™à¹€à¸‡à¸´à¸™à¸ªà¸”à¹„à¸”à¹‰

### à¸„à¸¸à¸“à¸ªà¸¡à¸šà¸±à¸•à¸´à¸«à¸¥à¸±à¸
âœ… à¹„à¸”à¹‰à¹€à¸«à¸£à¸µà¸¢à¸à¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´à¹€à¸¡à¸·à¹ˆà¸­ Booking à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´
âœ… à¸£à¸°à¸šà¸š Campaign à¹‚à¸šà¸™à¸±à¸ªà¸à¸´à¹€à¸¨à¸©
âœ… à¹à¸¥à¸à¹€à¸«à¸£à¸µà¸¢à¸à¹€à¸›à¹‡à¸™à¹€à¸‡à¸´à¸™à¸ªà¸”
âœ… à¸•à¸´à¸”à¸•à¸²à¸¡à¸›à¸£à¸°à¸§à¸±à¸•à¸´à¸à¸²à¸£à¸—à¸³à¸˜à¸¸à¸£à¸à¸£à¸£à¸¡
âœ… Admin à¸ˆà¸±à¸”à¸à¸²à¸£à¸£à¸°à¸šà¸šà¹„à¸”à¹‰à¹€à¸•à¹‡à¸¡à¸£à¸¹à¸›à¹à¸šà¸š

### à¸­à¸±à¸•à¸£à¸²à¹à¸¥à¸à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™
```
1 Coin = 1 à¸šà¸²à¸—
```

---

## ğŸ”„ Flow à¸«à¸¥à¸±à¸à¸‚à¸­à¸‡à¸£à¸°à¸šà¸š

### 1. Coin Earning Flow (à¸à¸²à¸£à¹„à¸”à¹‰à¹€à¸«à¸£à¸µà¸¢à¸)

```mermaid
graph TD
    A[Seller à¸ªà¸£à¹‰à¸²à¸‡ Booking] --> B[Customer à¸ˆà¸­à¸‡ Trip]
    B --> C[Admin à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š Booking]
    C --> D{à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´?}
    D -->|Yes| E[Database Trigger]
    D -->|No| F[à¸ˆà¸š - à¹„à¸¡à¹ˆà¹„à¸”à¹‰à¹€à¸«à¸£à¸µà¸¢à¸]

    E --> G[à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š Earning Rules]
    G --> H[à¸„à¸³à¸™à¸§à¸“à¸ˆà¸³à¸™à¸§à¸™à¹€à¸«à¸£à¸µà¸¢à¸]

    H --> I{à¸¡à¸µ Campaign à¸«à¸£à¸·à¸­à¹„à¸¡à¹ˆ?}
    I -->|Yes| J[à¹€à¸à¸´à¹ˆà¸¡à¹€à¸«à¸£à¸µà¸¢à¸à¹‚à¸šà¸™à¸±à¸ª]
    I -->|No| K[à¹€à¸à¸´à¹ˆà¸¡à¹€à¸«à¸£à¸µà¸¢à¸à¸›à¸à¸•à¸´]

    J --> L[à¸šà¸±à¸™à¸—à¸¶à¸ Transaction]
    K --> L

    L --> M[à¸­à¸±à¸›à¹€à¸”à¸• Balance]
    M --> N[Real-time Update UI]
    N --> O[Seller à¹€à¸«à¹‡à¸™à¹€à¸«à¸£à¸µà¸¢à¸à¹€à¸à¸´à¹ˆà¸¡]
```

**à¸„à¸³à¸­à¸˜à¸´à¸šà¸²à¸¢**:
1. Seller à¸ªà¸£à¹‰à¸²à¸‡ Booking à¹ƒà¸«à¹‰à¸¥à¸¹à¸à¸„à¹‰à¸²
2. Admin à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´ Booking (à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸ªà¸–à¸²à¸™à¸°à¹€à¸›à¹‡à¸™ 'approved')
3. Database Trigger à¸—à¸³à¸‡à¸²à¸™à¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´
4. à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸à¸à¸à¸²à¸£à¹ƒà¸«à¹‰à¹€à¸«à¸£à¸µà¸¢à¸ (Earning Rules)
5. à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸§à¹ˆà¸²à¸¡à¸µ Campaign à¸—à¸µà¹ˆà¹ƒà¸Šà¹‰à¹„à¸”à¹‰à¸«à¸£à¸·à¸­à¹„à¸¡à¹ˆ
6. à¸šà¸±à¸™à¸—à¸¶à¸à¸˜à¸¸à¸£à¸à¸£à¸£à¸¡à¹à¸¥à¸°à¸­à¸±à¸›à¹€à¸”à¸•à¸¢à¸­à¸”à¸„à¸‡à¹€à¸«à¸¥à¸·à¸­
7. à¹à¸ªà¸”à¸‡à¸œà¸¥à¹à¸šà¸š Real-time à¹ƒà¸«à¹‰ Seller

---

### 2. Campaign Flow (à¹à¸„à¸¡à¹€à¸›à¸à¹‚à¸šà¸™à¸±à¸ª)

```mermaid
graph TD
    A[Admin à¸ªà¸£à¹‰à¸²à¸‡ Campaign] --> B[à¸à¸³à¸«à¸™à¸”à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”]
    B --> C[à¹€à¸¥à¸·à¸­à¸ Trip/Period]
    C --> D[à¸à¸³à¸«à¸™à¸”à¸ˆà¸³à¸™à¸§à¸™à¹€à¸«à¸£à¸µà¸¢à¸à¹‚à¸šà¸™à¸±à¸ª]
    D --> E[à¹€à¸›à¸´à¸”à¹ƒà¸Šà¹‰à¸‡à¸²à¸™ Campaign]

    E --> F[à¹à¸ªà¸”à¸‡ Badge à¸šà¸™ Trip Card]
    F --> G[Seller à¹€à¸«à¹‡à¸™ Campaign]

    G --> H[Seller à¸‚à¸²à¸¢ Trip à¸™à¸±à¹‰à¸™]
    H --> I[Booking à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´]
    I --> J[à¹„à¸”à¹‰à¹€à¸«à¸£à¸µà¸¢à¸à¸›à¸à¸•à¸´ + à¹‚à¸šà¸™à¸±à¸ª]

    J --> K{Campaign à¸«à¸¡à¸”à¸­à¸²à¸¢à¸¸?}
    K -->|Yes| L[à¸›à¸´à¸” Campaign]
    K -->|No| F
```

**à¸›à¸£à¸°à¹€à¸ à¸— Campaign**:
- **Trip Specific**: à¹‚à¸šà¸™à¸±à¸ªà¸ªà¸³à¸«à¸£à¸±à¸š Trip à¹€à¸‰à¸à¸²à¸°
- **Period Based**: à¹‚à¸šà¸™à¸±à¸ªà¹ƒà¸™à¸Šà¹ˆà¸§à¸‡à¹€à¸§à¸¥à¸²à¸—à¸µà¹ˆà¸à¸³à¸«à¸™à¸”
- **Sales Target**: à¹‚à¸šà¸™à¸±à¸ªà¹€à¸¡à¸·à¹ˆà¸­à¸–à¸¶à¸‡à¸¢à¸­à¸”à¸‚à¸²à¸¢

---

### 3. Redemption Flow (à¹à¸¥à¸à¹€à¸«à¸£à¸µà¸¢à¸à¹€à¸›à¹‡à¸™à¹€à¸‡à¸´à¸™)

```mermaid
graph TD
    A[Seller à¸¡à¸µà¹€à¸«à¸£à¸µà¸¢à¸à¹ƒà¸™à¸šà¸±à¸à¸Šà¸µ] --> B{à¹€à¸«à¸£à¸µà¸¢à¸à¸à¸­à¸«à¸£à¸·à¸­à¹„à¸¡à¹ˆ?}
    B -->|No| C[à¸ªà¸°à¸ªà¸¡à¹€à¸«à¸£à¸µà¸¢à¸à¹€à¸à¸´à¹ˆà¸¡]
    B -->|Yes| D[à¸„à¸¥à¸´à¸ Redeem]

    D --> E[à¸à¸£à¸­à¸à¸ˆà¸³à¸™à¸§à¸™à¹€à¸«à¸£à¸µà¸¢à¸]
    E --> F[à¹€à¸¥à¸·à¸­à¸à¸šà¸±à¸à¸Šà¸µà¸˜à¸™à¸²à¸„à¸²à¸£]
    F --> G[à¸ªà¹ˆà¸‡à¸„à¸³à¸‚à¸­à¹à¸¥à¸à¹€à¸«à¸£à¸µà¸¢à¸]

    G --> H[à¸ªà¸–à¸²à¸™à¸°: Pending]
    H --> I[Admin à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š]

    I --> J{à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´?}
    J -->|Yes| K[à¸«à¸±à¸à¹€à¸«à¸£à¸µà¸¢à¸à¸—à¸±à¸™à¸—à¸µ]
    J -->|No| L[à¸›à¸à¸´à¹€à¸ªà¸˜ + à¹à¸ˆà¹‰à¸‡à¹€à¸«à¸•à¸¸à¸œà¸¥]

    K --> M[à¸ªà¸–à¸²à¸™à¸°: Approved]
    M --> N[Admin à¹‚à¸­à¸™à¹€à¸‡à¸´à¸™à¸ˆà¸£à¸´à¸‡]
    N --> O[à¸ªà¸–à¸²à¸™à¸°: Paid]
    O --> P[Seller à¹„à¸”à¹‰à¹€à¸‡à¸´à¸™]

    L --> Q[à¹€à¸«à¸£à¸µà¸¢à¸à¹„à¸¡à¹ˆà¸–à¸¹à¸à¸«à¸±à¸]
```

**à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸à¸²à¸£à¹à¸¥à¸**:
1. **Pending**: à¸£à¸­ Admin à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š
2. **Approved**: à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´à¹à¸¥à¸°à¸«à¸±à¸à¹€à¸«à¸£à¸µà¸¢à¸à¹à¸¥à¹‰à¸§
3. **Paid**: à¹‚à¸­à¸™à¹€à¸‡à¸´à¸™à¹€à¸£à¸µà¸¢à¸šà¸£à¹‰à¸­à¸¢
4. **Rejected**: à¸›à¸à¸´à¹€à¸ªà¸˜à¸à¸£à¹‰à¸­à¸¡à¹€à¸«à¸•à¸¸à¸œà¸¥

---

## ğŸ‘¥ User Flows

### Flow à¸ªà¸³à¸«à¸£à¸±à¸š Seller

#### A. à¸”à¸¹à¸¢à¸­à¸”à¹€à¸«à¸£à¸µà¸¢à¸
```
1. Login à¹€à¸‚à¹‰à¸²à¸£à¸°à¸šà¸š
2. à¹€à¸«à¹‡à¸™à¸¢à¸­à¸”à¹€à¸«à¸£à¸µà¸¢à¸à¸—à¸µà¹ˆ Navigation Bar
   - Real-time update
   - à¹à¸ªà¸”à¸‡à¸ˆà¸³à¸™à¸§à¸™à¸›à¸±à¸ˆà¸ˆà¸¸à¸šà¸±à¸™
3. à¸„à¸¥à¸´à¸à¸”à¸¹à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”à¸—à¸µà¹ˆà¸«à¸™à¹‰à¸² /dashboard/coins
   - à¸¢à¸­à¸”à¸„à¸‡à¹€à¸«à¸¥à¸·à¸­
   - à¸¢à¸­à¸”à¸—à¸µà¹ˆà¹„à¸”à¹‰à¸¡à¸²à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”
   - à¸¢à¸­à¸”à¸—à¸µà¹ˆà¹à¸¥à¸à¹„à¸›à¹à¸¥à¹‰à¸§
```

#### B. à¸£à¸±à¸šà¹€à¸«à¸£à¸µà¸¢à¸à¸ˆà¸²à¸à¸à¸²à¸£à¸‚à¸²à¸¢
```
1. à¸ªà¸£à¹‰à¸²à¸‡ Booking à¹ƒà¸«à¹‰à¸¥à¸¹à¸à¸„à¹‰à¸²
2. à¸£à¸­ Admin à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´
3. à¹„à¸”à¹‰à¸£à¸±à¸šà¹à¸ˆà¹‰à¸‡à¹€à¸•à¸·à¸­à¸™ (à¸–à¹‰à¸²à¸¡à¸µ)
4. à¹€à¸«à¹‡à¸™à¹€à¸«à¸£à¸µà¸¢à¸à¹€à¸à¸´à¹ˆà¸¡à¸‚à¸¶à¹‰à¸™à¸—à¸±à¸™à¸—à¸µ
5. à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸›à¸£à¸°à¸§à¸±à¸•à¸´à¹„à¸”à¹‰à¸—à¸µà¹ˆ Transaction History
```

#### C. à¸”à¸¹ Campaign à¹à¸¥à¸°à¹‚à¸šà¸™à¸±à¸ª
```
1. à¹„à¸›à¸—à¸µà¹ˆà¸«à¸™à¹‰à¸² Trips
2. à¹€à¸«à¹‡à¸™ Badge "ğŸ +X Coins" à¸šà¸™ Trip Card
3. à¸„à¸¥à¸´à¸à¸”à¸¹à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸” Campaign
4. à¸‚à¸²à¸¢ Trip à¸™à¸±à¹‰à¸™à¹€à¸à¸·à¹ˆà¸­à¸£à¸±à¸šà¹‚à¸šà¸™à¸±à¸ª
```

#### D. à¹à¸¥à¸à¹€à¸«à¸£à¸µà¸¢à¸à¹€à¸›à¹‡à¸™à¹€à¸‡à¸´à¸™
```
1. à¹„à¸›à¸—à¸µà¹ˆà¸«à¸™à¹‰à¸² /dashboard/coins
2. à¸„à¸¥à¸´à¸à¸›à¸¸à¹ˆà¸¡ "Redeem Coins"
3. à¸à¸£à¸­à¸:
   - à¸ˆà¸³à¸™à¸§à¸™à¹€à¸«à¸£à¸µà¸¢à¸à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¹à¸¥à¸
   - à¹€à¸¥à¸·à¸­à¸à¸šà¸±à¸à¸Šà¸µà¸˜à¸™à¸²à¸„à¸²à¸£
4. à¸ªà¹ˆà¸‡à¸„à¸³à¸‚à¸­
5. à¸£à¸­ Admin à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´ (2-5 à¸§à¸±à¸™à¸—à¸³à¸à¸²à¸£)
6. à¸•à¸´à¸”à¸•à¸²à¸¡à¸ªà¸–à¸²à¸™à¸°à¸—à¸µà¹ˆà¸«à¸™à¹‰à¸² Redemption History
7. à¹„à¸”à¹‰à¹€à¸‡à¸´à¸™à¹ƒà¸™à¸šà¸±à¸à¸Šà¸µ
```

---

### Flow à¸ªà¸³à¸«à¸£à¸±à¸š Admin

#### A. à¸ˆà¸±à¸”à¸à¸²à¸£ Campaigns
```
1. Login à¸”à¹‰à¸§à¸¢ Admin Account
2. à¹„à¸›à¸—à¸µà¹ˆ /dashboard/admin/coins
3. Tab "Campaigns"
4. à¸ªà¸£à¹‰à¸²à¸‡ Campaign à¹ƒà¸«à¸¡à¹ˆ:
   - à¸Šà¸·à¹ˆà¸­à¹à¸¥à¸°à¸„à¸³à¸­à¸˜à¸´à¸šà¸²à¸¢
   - à¸›à¸£à¸°à¹€à¸ à¸— Campaign
   - à¸ˆà¸³à¸™à¸§à¸™à¹€à¸«à¸£à¸µà¸¢à¸à¹‚à¸šà¸™à¸±à¸ª
   - à¹€à¸¥à¸·à¸­à¸ Trip (à¸–à¹‰à¸²à¹€à¸›à¹‡à¸™ Trip Specific)
   - à¸§à¸±à¸™à¹€à¸£à¸´à¹ˆà¸¡-à¸ªà¸´à¹‰à¸™à¸ªà¸¸à¸”
5. à¸šà¸±à¸™à¸—à¸¶à¸ â†’ Campaign à¹€à¸›à¸´à¸”à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¸—à¸±à¸™à¸—à¸µ
6. à¹à¸à¹‰à¹„à¸‚/à¸›à¸´à¸”à¸à¸²à¸£à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¹„à¸”à¹‰à¸•à¸¥à¸­à¸”
```

#### B. à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´à¸à¸²à¸£à¹à¸¥à¸à¹€à¸«à¸£à¸µà¸¢à¸
```
1. à¹„à¸›à¸—à¸µà¹ˆ Tab "Redemptions"
2. à¹€à¸«à¹‡à¸™à¸£à¸²à¸¢à¸à¸²à¸£à¸„à¸³à¸‚à¸­ Pending
3. à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥:
   - Seller
   - à¸ˆà¸³à¸™à¸§à¸™à¹€à¸«à¸£à¸µà¸¢à¸/à¹€à¸‡à¸´à¸™
   - à¸šà¸±à¸à¸Šà¸µà¸˜à¸™à¸²à¸„à¸²à¸£
4. à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´à¸«à¸£à¸·à¸­à¸›à¸à¸´à¹€à¸ªà¸˜
   - à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´: à¹€à¸«à¸£à¸µà¸¢à¸à¸–à¸¹à¸à¸«à¸±à¸à¸—à¸±à¸™à¸—à¸µ
   - à¸›à¸à¸´à¹€à¸ªà¸˜: à¹ƒà¸ªà¹ˆà¹€à¸«à¸•à¸¸à¸œà¸¥
5. à¹‚à¸­à¸™à¹€à¸‡à¸´à¸™à¸ˆà¸£à¸´à¸‡
6. à¸­à¸±à¸›à¹€à¸”à¸•à¸ªà¸–à¸²à¸™à¸°à¹€à¸›à¹‡à¸™ "Paid"
```

#### C. à¸›à¸£à¸±à¸šà¹€à¸«à¸£à¸µà¸¢à¸à¸”à¹‰à¸§à¸¢à¸•à¸™à¹€à¸­à¸‡
```
1. Tab "Manual Adjustment"
2. à¹€à¸¥à¸·à¸­à¸ Seller
3. à¸à¸£à¸­à¸:
   - à¸ˆà¸³à¸™à¸§à¸™ (+ à¸«à¸£à¸·à¸­ -)
   - à¹€à¸«à¸•à¸¸à¸œà¸¥
   - à¸„à¸³à¸­à¸˜à¸´à¸šà¸²à¸¢
4. à¸¢à¸·à¸™à¸¢à¸±à¸™
5. à¹€à¸«à¸£à¸µà¸¢à¸à¸›à¸£à¸±à¸šà¸—à¸±à¸™à¸—à¸µ + à¸šà¸±à¸™à¸—à¸¶à¸à¸›à¸£à¸°à¸§à¸±à¸•à¸´
```

#### D. à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸² Earning Rules
```
1. Tab "Earning Rules"
2. à¹€à¸à¸´à¹ˆà¸¡à¸à¸à¹ƒà¸«à¸¡à¹ˆ:
   - à¸Šà¸·à¹ˆà¸­à¸à¸
   - à¸›à¸£à¸°à¹€à¸ à¸— (booking, referral, etc.)
   - à¸ˆà¸³à¸™à¸§à¸™à¹€à¸«à¸£à¸µà¸¢à¸
   - à¸§à¸´à¸˜à¸µà¸„à¸³à¸™à¸§à¸“ (fixed/percentage)
   - à¹€à¸‡à¸·à¹ˆà¸­à¸™à¹„à¸‚ (à¸–à¹‰à¸²à¸¡à¸µ)
3. à¸šà¸±à¸™à¸—à¸¶à¸
4. à¸à¸à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¸—à¸±à¸™à¸—à¸µ
```

---

## âš™ï¸ Technical Flow

### Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Client    â”‚
â”‚  (Browser)  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ HTTP/WebSocket
       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Next.js API Routes        â”‚
â”‚  /api/coins/*               â”‚
â”‚  /api/admin/coins/*         â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Supabase Client
       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   PostgreSQL Database       â”‚
â”‚  - seller_coins             â”‚
â”‚  - coin_transactions        â”‚
â”‚  - coin_bonus_campaigns     â”‚
â”‚  - coin_redemptions         â”‚
â”‚  - coin_earning_rules       â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Triggers
       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Business Logic            â”‚
â”‚  - Auto coin calculation    â”‚
â”‚  - Campaign matching        â”‚
â”‚  - Balance updates          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### API Request Flow

#### Example: Seller à¸”à¸¹à¸›à¸£à¸°à¸§à¸±à¸•à¸´à¸˜à¸¸à¸£à¸à¸£à¸£à¸¡

```
1. User Request
   GET /api/coins?page=1&pageSize=20
   Headers: Authorization: Bearer <token>

2. API Route Handler
   - Verify user authentication
   - Get user_id from session
   - Query database

3. Database Query
   SELECT * FROM coin_transactions
   WHERE seller_id = <user_id>
   ORDER BY created_at DESC
   LIMIT 20 OFFSET 0

4. Response
   {
     "balance": {
       "balance": 1250,
       "total_earned": 2500,
       "total_redeemed": 1250
     },
     "transactions": [...],
     "pagination": {
       "currentPage": 1,
       "totalPages": 5,
       "total": 100
     }
   }

5. Client Update
   - à¹à¸ªà¸”à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹ƒà¸™ UI
   - Cache à¸‚à¹‰à¸­à¸¡à¸¹à¸¥
```

---

### Real-time Update Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Booking Approved                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Database Trigger Fires             â”‚
â”‚  trigger_add_coins_on_booking_approval
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  add_coins_for_approved_booking()   â”‚
â”‚  - à¸„à¸³à¸™à¸§à¸“à¹€à¸«à¸£à¸µà¸¢à¸                      â”‚
â”‚  - à¹€à¸à¸´à¹ˆà¸¡ transaction                 â”‚
â”‚  - à¸­à¸±à¸›à¹€à¸”à¸• balance                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  API à¸ªà¹ˆà¸‡ Event                      â”‚
â”‚  window.dispatchEvent(              â”‚
â”‚    'coinBalanceUpdated'             â”‚
â”‚  )                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Components Listen                  â”‚
â”‚  - CoinBalanceIndicator             â”‚
â”‚  - CoinTransactionHistory           â”‚
â”‚  - CoinBalanceCard                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Re-fetch Data                      â”‚
â”‚  GET /api/coins                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  UI Updates                         â”‚
â”‚  - à¹à¸ªà¸”à¸‡à¸¢à¸­à¸”à¹ƒà¸«à¸¡à¹ˆ                      â”‚
â”‚  - à¹à¸ªà¸”à¸‡ transaction à¹ƒà¸«à¸¡à¹ˆ            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’¾ Database Flow

### Transaction Flow (à¸à¸²à¸£à¸šà¸±à¸™à¸—à¸¶à¸à¸˜à¸¸à¸£à¸à¸£à¸£à¸¡)

```sql
-- 1. à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™: Booking à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´
UPDATE bookings
SET status = 'approved'
WHERE id = '<booking_id>';

-- 2. Trigger à¸—à¸³à¸‡à¸²à¸™à¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´
-- trigger_add_coins_on_booking_approval

-- 3. Function à¸—à¸³à¸‡à¸²à¸™
-- add_coins_for_approved_booking()

-- 4. à¸”à¸¶à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ Booking
SELECT seller_id, total_price
FROM bookings
WHERE id = '<booking_id>';

-- 5. à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š Earning Rules
SELECT coin_amount, calculation_type
FROM coin_earning_rules
WHERE rule_type = 'booking'
  AND is_active = true
ORDER BY priority DESC
LIMIT 1;

-- 6. à¸„à¸³à¸™à¸§à¸“à¸ˆà¸³à¸™à¸§à¸™à¹€à¸«à¸£à¸µà¸¢à¸
-- à¸–à¹‰à¸² fixed: à¹ƒà¸«à¹‰ coin_amount à¸•à¸²à¸¡à¸—à¸µà¹ˆà¸à¸³à¸«à¸™à¸”
-- à¸–à¹‰à¸² percentage: (total_price * coin_amount / 100)

-- 7. à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š Campaign
SELECT id, coin_amount
FROM coin_bonus_campaigns
WHERE target_trip_id = '<trip_id>'
  AND is_active = true
  AND start_date <= NOW()
  AND end_date >= NOW();

-- 8. à¹€à¸à¸´à¹ˆà¸¡ Transaction (Base)
INSERT INTO coin_transactions (
  seller_id,
  transaction_type,
  source_type,
  source_id,
  amount,
  balance_before,
  balance_after,
  description
) VALUES (
  '<seller_id>',
  'earn',
  'booking',
  '<booking_id>',
  100,
  1000,
  1100,
  'à¹€à¸«à¸£à¸µà¸¢à¸à¸ˆà¸²à¸à¸à¸²à¸£à¸‚à¸²à¸¢ Trip: <trip_name>'
);

-- 9. à¹€à¸à¸´à¹ˆà¸¡ Transaction (Campaign Bonus)
-- à¸–à¹‰à¸²à¸¡à¸µ Campaign
INSERT INTO coin_transactions (
  seller_id,
  transaction_type,
  source_type,
  source_id,
  amount,
  balance_before,
  balance_after,
  description
) VALUES (
  '<seller_id>',
  'bonus',
  'campaign',
  '<campaign_id>',
  50,
  1100,
  1150,
  'à¹‚à¸šà¸™à¸±à¸ªà¸à¸´à¹€à¸¨à¸©à¸ˆà¸²à¸ Campaign: <campaign_name>'
);

-- 10. à¸­à¸±à¸›à¹€à¸”à¸• Balance
UPDATE seller_coins
SET
  balance = balance + <total_coins>,
  total_earned = total_earned + <total_coins>,
  updated_at = NOW()
WHERE seller_id = '<seller_id>';

-- 11. Commit Transaction
COMMIT;
```

---

### Redemption Flow (Database Level)

```sql
-- 1. Seller à¸ªà¹ˆà¸‡à¸„à¸³à¸‚à¸­à¹à¸¥à¸à¹€à¸«à¸£à¸µà¸¢à¸
INSERT INTO coin_redemptions (
  seller_id,
  coin_amount,
  cash_amount,
  conversion_rate,
  status,
  bank_account_id
) VALUES (
  '<seller_id>',
  1000,
  1000,
  1.0,
  'pending',
  '<bank_account_id>'
);

-- 2. Admin à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´
UPDATE coin_redemptions
SET
  status = 'approved',
  approved_at = NOW(),
  approved_by = '<admin_id>'
WHERE id = '<redemption_id>';

-- 3. à¸«à¸±à¸à¹€à¸«à¸£à¸µà¸¢à¸à¸—à¸±à¸™à¸—à¸µ (via Trigger)
-- à¸”à¸¶à¸‡à¸¢à¸­à¸”à¸›à¸±à¸ˆà¸ˆà¸¸à¸šà¸±à¸™
SELECT balance FROM seller_coins
WHERE seller_id = '<seller_id>';

-- à¹€à¸à¸´à¹ˆà¸¡ Transaction
INSERT INTO coin_transactions (
  seller_id,
  transaction_type,
  source_type,
  source_id,
  amount,
  balance_before,
  balance_after,
  description
) VALUES (
  '<seller_id>',
  'redeem',
  'admin',
  '<redemption_id>',
  -1000,
  1500,
  500,
  'à¹à¸¥à¸à¹€à¸«à¸£à¸µà¸¢à¸à¹€à¸›à¹‡à¸™à¹€à¸‡à¸´à¸™à¸ªà¸”: 1,000 à¸šà¸²à¸—'
);

-- à¸­à¸±à¸›à¹€à¸”à¸• Balance
UPDATE seller_coins
SET
  balance = balance - 1000,
  total_redeemed = total_redeemed + 1000,
  updated_at = NOW()
WHERE seller_id = '<seller_id>';

-- 4. Admin à¹‚à¸­à¸™à¹€à¸‡à¸´à¸™à¹à¸¥à¸°à¸­à¸±à¸›à¹€à¸”à¸•à¸ªà¸–à¸²à¸™à¸°
UPDATE coin_redemptions
SET
  status = 'paid',
  paid_at = NOW(),
  notes = 'à¹‚à¸­à¸™à¹€à¸‡à¸´à¸™à¹€à¸£à¸µà¸¢à¸šà¸£à¹‰à¸­à¸¢'
WHERE id = '<redemption_id>';
```

---

## ğŸ“Š Business Rules

### 1. Earning Rules (à¸à¸à¸à¸²à¸£à¹„à¸”à¹‰à¹€à¸«à¸£à¸µà¸¢à¸)

| à¸›à¸£à¸°à¹€à¸ à¸— | à¸ˆà¸³à¸™à¸§à¸™à¹€à¸«à¸£à¸µà¸¢à¸ | à¹€à¸‡à¸·à¹ˆà¸­à¸™à¹„à¸‚ |
|--------|------------|---------|
| Booking à¸›à¸à¸•à¸´ | 100 coins | Booking à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´ |
| Campaign Trip | +50-200 coins | à¸•à¸²à¸¡ Campaign |
| Referral Bonus | 500 coins | Seller à¹ƒà¸«à¸¡à¹ˆà¸‚à¸²à¸¢à¸„à¸£à¸±à¹‰à¸‡à¹à¸£à¸ |
| Sales Target | 1,000 coins | à¸¢à¸­à¸”à¸‚à¸²à¸¢à¸–à¸¶à¸‡à¹€à¸›à¹‰à¸² |

### 2. Redemption Rules (à¸à¸à¸à¸²à¸£à¹à¸¥à¸)

```yaml
à¸‚à¸±à¹‰à¸™à¸•à¹ˆà¸³: 500 coins (500 à¸šà¸²à¸—)
à¹„à¸¡à¹ˆà¸ˆà¸³à¸à¸±à¸”à¸ªà¸¹à¸‡à¸ªà¸¸à¸”: à¹à¸¥à¸à¹„à¸”à¹‰à¹€à¸—à¹ˆà¸²à¸—à¸µà¹ˆà¸¡à¸µ
à¸£à¸°à¸¢à¸°à¹€à¸§à¸¥à¸²: 2-5 à¸§à¸±à¸™à¸—à¸³à¸à¸²à¸£
à¸„à¹ˆà¸²à¸˜à¸£à¸£à¸¡à¹€à¸™à¸µà¸¢à¸¡: à¹„à¸¡à¹ˆà¸¡à¸µ
à¸§à¸´à¸˜à¸µà¸£à¸±à¸šà¹€à¸‡à¸´à¸™: à¹‚à¸­à¸™à¹€à¸‚à¹‰à¸²à¸šà¸±à¸à¸Šà¸µà¸˜à¸™à¸²à¸„à¸²à¸£
```

### 3. Campaign Rules (à¸à¸ Campaign)

```yaml
à¸£à¸°à¸¢à¸°à¹€à¸§à¸¥à¸²:
  - à¸‚à¸±à¹‰à¸™à¸•à¹ˆà¸³: 1 à¸§à¸±à¸™
  - à¸ªà¸¹à¸‡à¸ªà¸¸à¸”: à¹„à¸¡à¹ˆà¸ˆà¸³à¸à¸±à¸”

à¸à¸²à¸£à¹ƒà¸Šà¹‰à¸‡à¸²à¸™:
  - à¹„à¸”à¹‰à¹‚à¸šà¸™à¸±à¸ªà¸—à¸±à¸™à¸—à¸µà¹€à¸¡à¸·à¹ˆà¸­ Booking à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´
  - à¸™à¸±à¸šà¹‚à¸šà¸™à¸±à¸ªà¹€à¸‰à¸à¸²à¸° Booking à¹ƒà¸™à¸Šà¹ˆà¸§à¸‡à¹€à¸§à¸¥à¸² Campaign
  - 1 Booking à¸ªà¸²à¸¡à¸²à¸£à¸–à¹„à¸”à¹‰à¸«à¸¥à¸²à¸¢ Campaign (à¸–à¹‰à¸²à¹€à¸‡à¸·à¹ˆà¸­à¸™à¹„à¸‚à¸•à¸£à¸‡à¸à¸±à¸™)

à¸à¸²à¸£à¸«à¸¡à¸”à¸­à¸²à¸¢à¸¸:
  - Campaign à¸›à¸´à¸”à¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´à¹€à¸¡à¸·à¹ˆà¸­à¸–à¸¶à¸‡à¸§à¸±à¸™à¸ªà¸´à¹‰à¸™à¸ªà¸¸à¸”
  - Admin à¸›à¸´à¸”à¸”à¹‰à¸§à¸¢à¸•à¸™à¹€à¸­à¸‡à¹„à¸”à¹‰à¸•à¸¥à¸­à¸”
```

### 4. Security Rules (à¸à¸à¸„à¸§à¸²à¸¡à¸›à¸¥à¸­à¸”à¸ à¸±à¸¢)

```yaml
RLS Policies:
  - Seller à¹€à¸«à¹‡à¸™à¹€à¸‰à¸à¸²à¸°à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸‚à¸­à¸‡à¸•à¸±à¸§à¹€à¸­à¸‡
  - Seller à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹à¸à¹‰à¹„à¸‚ balance à¹‚à¸”à¸¢à¸•à¸£à¸‡
  - Admin à¹€à¸«à¹‡à¸™à¹à¸¥à¸°à¹à¸à¹‰à¹„à¸‚à¹„à¸”à¹‰à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”

Transaction Immutability:
  - coin_transactions à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹à¸à¹‰à¹„à¸‚à¸«à¸£à¸·à¸­à¸¥à¸šà¹„à¸”à¹‰
  - à¹€à¸›à¹‡à¸™ audit trail à¸–à¸²à¸§à¸£

Validation:
  - à¸ˆà¸³à¸™à¸§à¸™à¹€à¸«à¸£à¸µà¸¢à¸à¹„à¸¡à¹ˆà¸•à¸´à¸”à¸¥à¸š
  - à¸¢à¸­à¸”à¹à¸¥à¸à¸•à¹‰à¸­à¸‡à¹„à¸¡à¹ˆà¹€à¸à¸´à¸™ balance
  - à¸šà¸±à¸à¸Šà¸µà¸˜à¸™à¸²à¸„à¸²à¸£à¸•à¹‰à¸­à¸‡à¹€à¸›à¹‡à¸™à¸‚à¸­à¸‡ Seller à¹€à¸­à¸‡
```

---

## ğŸ¨ UI/UX Flow

### Seller Interface

#### à¸«à¸™à¹‰à¸² Dashboard (/dashboard/coins)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ’° à¸¢à¸­à¸”à¹€à¸«à¸£à¸µà¸¢à¸à¸‚à¸­à¸‡à¸„à¸¸à¸“                          â”‚
â”‚                                              â”‚
â”‚  [1,250]    [2,500]      [1,250]            â”‚
â”‚  à¸„à¸‡à¹€à¸«à¸¥à¸·à¸­     à¹„à¸”à¹‰à¸¡à¸²à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”    à¹à¸¥à¸à¹„à¸›à¹à¸¥à¹‰à¸§      â”‚
â”‚                                              â”‚
â”‚  [à¸›à¸¸à¹ˆà¸¡: Redeem Coins]                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ à¹à¸„à¸¡à¹€à¸›à¸à¸—à¸µà¹ˆà¸à¸³à¸¥à¸±à¸‡à¸¡à¸µ                         â”‚
â”‚                                              â”‚
â”‚  [Card 1: Summer Sale +200 Coins]           â”‚
â”‚  [Card 2: Weekend Bonus +100 Coins]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“œ à¸›à¸£à¸°à¸§à¸±à¸•à¸´à¸à¸²à¸£à¸—à¸³à¸˜à¸¸à¸£à¸à¸£à¸£à¸¡                       â”‚
â”‚                                              â”‚
â”‚  ğŸ”¹ 20 à¸•.à¸„. 2025 | +100 | Booking: Trip A  â”‚
â”‚  ğŸ 19 à¸•.à¸„. 2025 | +50  | Campaign Bonus   â”‚
â”‚  ğŸ’¸ 18 à¸•.à¸„. 2025 | -1000| à¹à¸¥à¸à¹€à¸›à¹‡à¸™à¹€à¸‡à¸´à¸™à¸ªà¸”     â”‚
â”‚                                              â”‚
â”‚  [Load More...]                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Admin Interface

#### à¸«à¸™à¹‰à¸² Admin Coins (/dashboard/admin/coins)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š Dashboard Overview                        â”‚
â”‚                                              â”‚
â”‚  Total Distributed: 50,000 Coins            â”‚
â”‚  Total Redeemed: 15,000 Coins               â”‚
â”‚  Active Balance: 35,000 Coins               â”‚
â”‚  Pending Redemptions: 5,000 Coins           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[Tab: Overview | Campaigns | Redemptions | Rules | Manual Adjust]

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¯ Active Campaigns                          â”‚
â”‚                                              â”‚
â”‚  [Table with Campaign List]                 â”‚
â”‚  [à¸›à¸¸à¹ˆà¸¡: Create New Campaign]                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ… Redemption Requests                       â”‚
â”‚                                              â”‚
â”‚  [Table with Pending Requests]              â”‚
â”‚  [à¸›à¸¸à¹ˆà¸¡ Approve | Reject à¹à¸•à¹ˆà¸¥à¸°à¸£à¸²à¸¢à¸à¸²à¸£]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Security & Validation

### Data Flow Security

```
Client Side
  â”‚
  â”œâ”€ à¹à¸ªà¸”à¸‡à¸œà¸¥à¹€à¸—à¹ˆà¸²à¸™à¸±à¹‰à¸™
  â”œâ”€ à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹à¸à¹‰à¹„à¸‚à¸¢à¸­à¸”à¹„à¸”à¹‰
  â””â”€ Validate form input only

API Layer
  â”‚
  â”œâ”€ Verify JWT token
  â”œâ”€ Check user role
  â”œâ”€ Validate request data
  â””â”€ Rate limiting

Database Layer
  â”‚
  â”œâ”€ RLS policies
  â”œâ”€ Check constraints
  â”œâ”€ Triggers for business logic
  â””â”€ Transaction isolation
```

---

## ğŸ“ˆ Performance Considerations

### Caching Strategy
```yaml
API Responses:
  - Cache duration: 30 seconds
  - Key format: coins:<user_id>:balance

Static Data:
  - Campaigns: 5 minutes
  - Earning Rules: 10 minutes

Real-time Updates:
  - Event-driven invalidation
  - WebSocket for instant updates
```

### Database Optimization
```sql
-- Indexes for performance
CREATE INDEX idx_coin_transactions_seller_id ON coin_transactions(seller_id);
CREATE INDEX idx_coin_transactions_created_at ON coin_transactions(created_at DESC);
CREATE INDEX idx_coin_redemptions_status ON coin_redemptions(status);
CREATE INDEX idx_campaigns_dates ON coin_bonus_campaigns(start_date, end_date);
```

---

## ğŸš€ Future Enhancements

### Phase 2 (Q1 2026)
- [ ] à¸£à¸°à¸šà¸š Tier (Bronze/Silver/Gold)
- [ ] Leaderboard à¸£à¸²à¸¢à¹€à¸”à¸·à¸­à¸™
- [ ] Push notifications à¸ªà¸³à¸«à¸£à¸±à¸šà¹„à¸”à¹‰à¹€à¸«à¸£à¸µà¸¢à¸
- [ ] Mobile app integration

### Phase 3 (Q2 2026)
- [ ] Coin expiry system
- [ ] Automated payouts
- [ ] Advanced analytics dashboard
- [ ] Gamification features

---

## ğŸ“ Contact & Support

**Technical Questions**:
- Check: `COIN_SYSTEM_GUIDE.md` (Developer Guide)
- Check: `CLAUDE.md` (Project Setup)

**Business Questions**:
- à¸•à¸´à¸”à¸•à¹ˆà¸­ Product Manager
- Email: support@gography.com

---

## ğŸ“ Summary for Meeting

### à¸ˆà¸¸à¸”à¹€à¸”à¹ˆà¸™à¸—à¸µà¹ˆà¸„à¸§à¸£à¸™à¸³à¹€à¸ªà¸™à¸­:

1. **à¸£à¸°à¸šà¸šà¸—à¸³à¸‡à¸²à¸™à¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´ 100%**
   - Booking à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´ â†’ à¹„à¸”à¹‰à¹€à¸«à¸£à¸µà¸¢à¸à¸—à¸±à¸™à¸—à¸µ
   - à¹„à¸¡à¹ˆà¸•à¹‰à¸­à¸‡à¸„à¸³à¸™à¸§à¸“à¸”à¹‰à¸§à¸¢à¸•à¸™à¹€à¸­à¸‡

2. **Real-time Updates**
   - Seller à¹€à¸«à¹‡à¸™à¸¢à¸­à¸”à¹€à¸«à¸£à¸µà¸¢à¸à¹€à¸à¸´à¹ˆà¸¡à¸—à¸±à¸™à¸—à¸µ
   - à¹„à¸¡à¹ˆà¸•à¹‰à¸­à¸‡ refresh à¸«à¸™à¹‰à¸²

3. **Flexible Campaign System**
   - Admin à¸ªà¸£à¹‰à¸²à¸‡ Campaign à¹„à¸”à¹‰à¸‡à¹ˆà¸²à¸¢
   - à¸›à¸£à¸±à¸šà¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¹„à¸”à¹‰à¸•à¸¥à¸­à¸”à¹€à¸§à¸¥à¸²

4. **Security & Audit Trail**
   - à¸—à¸¸à¸ transaction à¸šà¸±à¸™à¸—à¸¶à¸à¸–à¸²à¸§à¸£
   - à¸›à¹‰à¸­à¸‡à¸à¸±à¸™à¸à¸²à¸£à¹‚à¸à¸‡à¸”à¹‰à¸§à¸¢ RLS

5. **User-Friendly Interface**
   - Seller: à¹€à¸‚à¹‰à¸²à¹ƒà¸ˆà¸‡à¹ˆà¸²à¸¢ à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¸ªà¸°à¸”à¸§à¸
   - Admin: à¸ˆà¸±à¸”à¸à¸²à¸£à¹„à¸”à¹‰à¹€à¸•à¹‡à¸¡à¸£à¸¹à¸›à¹à¸šà¸š

---

**à¹€à¸­à¸à¸ªà¸²à¸£à¸™à¸µà¹‰à¸ªà¸£à¹‰à¸²à¸‡à¹€à¸¡à¸·à¹ˆà¸­**: 20 à¸•à¸¸à¸¥à¸²à¸„à¸¡ 2025
**Version**: 1.0
**à¸ªà¸³à¸«à¸£à¸±à¸š**: à¸à¸²à¸£à¸›à¸£à¸°à¸Šà¸¸à¸¡à¸­à¸˜à¸´à¸šà¸²à¸¢à¸£à¸°à¸šà¸š Coins
